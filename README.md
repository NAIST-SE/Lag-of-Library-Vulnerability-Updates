# On The Lag of Library Vulnerability Updates
## An Investigation into Repackage and Delivery of Security Fixes Within The npm JavaScript Ecosystem

### Abstract
Vulnerabilities in third-party libraries is a growing concern for the software developer, as it poses risks not only to the software client itself but to the entire software ecosystem. To mitigate these risks, developers are strongly recommended to update their dependencies. Recent studies show that affected developers are not likely to respond to the vulnerability threat. However, another reason for the lag of vulnerability updates is due to slow repackaging (i.e., package the vulnerability fix into a new version) and delivery (i.e., affected client adopt the new version) of the fix. To understand these lags of updates, we use both qualitative and quantitative approaches to conduct an empirical study on how 188 fixes were repackaged and delivered across over eight hundred thousand releases of npm software clients hosted on GitHub. We report two lags: (1) lags in repackaging occur as vulnerability fixes are more likely to be bundled with other non-related updates (i.e.,) about 83.33% of commits are not related to the fix) and (2) lags in the delivery are caused by clients that are more likely to adopt the minor fix than adopt the patch fix. Furthermore, other factors such as downstream dependencies and severity do have an impact. We also find that freshness of packages does not impact the amount of lags. The identification of these two lags opens up different avenues on how to facilitate faster fix delivery throughout a library ecosystem.

### Processed Dataset
This section shows the structure of dataset for our study.
Dataset is in JSON format.
Each file is associated with one vulnerability.

#### Vulnerability report
Vulnerability reports in this study are extracted from **synk.io**.
Each file contains one JSON object.
- [Download vulnerability report](report/report_data.tar.gz)

The following table shows the structure of vulnerability reports.

|Key          |Description                        |
|-------------|-----------------------------------|
|snyk_id      | Vulnerability report id provided by snyk|
|link         | Link to vulnerability report page |
|pub_date_long| Published date (ISO format)       |
|description  | Raw html description              |
|lib_name     | Affected library name             |
|severity     | Level of severity                 |
|vul_type     | Type of vulnerability             |
|aff_ver      | Affected version range (<,<=,>,>=,\|\|,ALL)|
|credit       | Vulnerability Reporter            |
|cwe          | CWE number                        |
|disc_date    | Disclosed date                    |
|pub_date     | Published date                    |

#### Dataset for RQ1
Dataset for RQ1 represents vulnerability fixes.
Each file contains one JSON object.
- [Download Dataset for RQ1](RQ1/rq1_data.tar.gz)

The following table shows the structure of RQ1 dataset.

| Key                | Description                                                               |
|--------------------|---------------------------------------------------------------------------|
| id                 | Vulnerability report id                                                   |
| aff_ver            | Affected version range                                                    |
| lib_name           | Affected library name                                                     |
| release_type       | Type of the fix released by libraries                                     |
| num_fix_commit     | Number of commits that related to the fix                                 |
| num_release_commit | Number of commits in the release                                          |
| references         | Links in references section                                               |
| compare_link       | Link to GitHub for comparing changes between vulnerable and fixed version |

#### Dataset for RQ2
Dataset for RQ2 represents the adoption of delivered fixes by clients.
Each file contains one JSON array.
Instances in an array are clients that directly depend on a vulnerable library.
- [Download Dataset for RQ2](RQ2/rq2_data.tar.gz)

The following table shows the structure of RQ2 dataset.

| Key         | Description                                                   |
|-------------|---------------------------------------------------------------|
| client_name | Client name                                                   |
| vul_lib_ver | Vulnerable version of library adopted by client               |
| fix_lib_ver | Fixed version of library adopted by client                    |
| adoption    | Fix adoption of client                                        |

#### Dataset for RQ3
Dataset for RQ3 represents lags of updates in fix delivery phase.
Each file contains one JSON array.
Instances in an array are downstream clients that depend on a vulnerable library.
- [Download Dataset for RQ3](RQ3/rq3_data.tar.gz)

The following table shows the structure of RQ3 dataset.

| Key        | Description                                                |
|------------|------------------------------------------------------------|
| name       | Client name                                                |
| dependency | Direct dependency name of the client                       |
| proximity  | Proximity between vulnerable library and downstream client |
| lags_day   | Lags of updates (days)                                     |
